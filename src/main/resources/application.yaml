spring:
  application:
    name: outbox
  main:
    allow-bean-definition-overriding: true
  cloud:
    stream:
      kafka:
        binder:
          brokers: ${KAFKA_URI}
      bindings:
        debeziumEventConsumer-in-0:
          destination: ${DEBEZIUM_DESTINATION}
          group: 1
          content-type: application/json
  kafka:
    listener:
      ack-mode: manual
    consumer:
      auto-offset-reset: earliest
      enable-auto-commit: false
      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer
      value-deserializer: org.springframework.kafka.support.serializer.JsonDeserializer
      properties:
        spring.json:
          trusted.packages: com.ecommerce.outbox
          value:
            default.type: com.ecommerce.outbox.events.OutboxEvent
